<style>
.carousel-btn {
  background: none !important;
  border: none;
  color: #1f2020;
  font-size: 2rem;
  cursor: pointer;
  transition: color 0.3s ease;
}
</style>


<div class="phone-graph">
  <div class="carousel">
    {% for block in section.blocks %}
      <div class="carousel-slide {% if forloop.first %}active{% endif %}">
        <img src="{{ block.settings.image | img_url: 'master' }}" alt="{{ block.settings.alt_text }}" />
        <p class="carousel-caption">{{ block.settings.caption }}</p>
      </div>
    {% endfor %}

    <!-- Navigation buttons -->
    <button class="carousel-btn prev">&#10094;</button>
    <button class="carousel-btn next">&#10095;</button>
  </div>
</div>

{% schema %}
{
  "name": "Phone Carousel",
  "settings": [],
  "blocks": [
    {
      "type": "carousel_image",
      "name": "Carousel Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "alt_text",
          "label": "Alt Text"
        },
        {
          "type": "text",
          "id": "caption",
          "label": "Caption"
        }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "Phone Carousel",
      "category": "Carousel"
    }
  ]
}
{% endschema %}

<script>
document.addEventListener("DOMContentLoaded", function () {
  const slides = document.querySelectorAll(".carousel-slide");
  const prevBtn = document.querySelector(".carousel-btn.prev");
  const nextBtn = document.querySelector(".carousel-btn.next");

  let currentIndex = 0;
  let autoPlayInterval;

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.toggle("active", i === index);
    });
  }

  function nextSlide() {
    currentIndex = (currentIndex + 1) % slides.length; // loop back to 0
    showSlide(currentIndex);
  }

  function prevSlide() {
    currentIndex = (currentIndex - 1 + slides.length) % slides.length; // loop back to last
    showSlide(currentIndex);
  }

  function startAutoPlay() {
    autoPlayInterval = setInterval(nextSlide, 3000); // change every 3s
  }

  function stopAutoPlay() {
    clearInterval(autoPlayInterval);
  }

  // Button click events
  nextBtn.addEventListener("click", function () {
    stopAutoPlay();
    nextSlide();
    startAutoPlay();
  });

  prevBtn.addEventListener("click", function () {
    stopAutoPlay();
    prevSlide();
    startAutoPlay();
  });

  // Initialize
  showSlide(currentIndex);
  startAutoPlay();
});
</script>