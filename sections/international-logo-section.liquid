{{ 'international-logo-section.css' | asset_url | stylesheet_tag }}
{{ 'international-responsive.css' | asset_url | stylesheet_tag }}

<div class="international-network">
  <div class="page-width">
    <div class="network-text">
      <p class="network-heading">
        {{ section.settings.heading | default: "NUTRIFACTOR CAN BE FOUND ON THESE LARGEST NETWORKS" }}
      </p>
      <hr>
      <p>
        {{ section.settings.description | default: "Through sheer determination and constant hard work, Nutrifactor has been featured by some of the largest networks & business journals. Expanding its business to over 60 countries across the globe in 6 different continents, Nutrifactor is on its way to becoming a globally renowned brand." }}
      </p>
    </div>

    <!-- âœ… Clean wrapper for carousel -->
    <div class="network-banner logos-per-{{ section.settings.logos_per_row }}">
      <div class="network-track">
        {% for block in section.blocks %}
          {% if block.type == 'logo' %}
            <div class="network-slide">
              <img src="{{ block.settings.logo | image_url }}" alt="{{ block.settings.alt_text }}">
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Logo Section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "NUTRIFACTOR CAN BE FOUND ON THESE LARGEST NETWORKS"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Through sheer determination and constant hard work, Nutrifactor has been featured by some of the largest networks & business journals. Expanding its business to over 60 countries across the globe in 6 different continents, Nutrifactor is on its way to becoming a globally renowned brand."
    },
    {
      "type": "range",
      "id": "logos_per_row",
      "label": "Logos per row",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 5
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "limit": 5,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo image"
        },
        {
          "type": "text",
          "id": "alt_text",
          "label": "Alt text",
          "default": "Network logo"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Logo Section",
      "category": "International Section"
    }
  ]
}
{% endschema %}

<script>
function initLogoCarousel(banner) {
  if (!banner) return;
  const track = banner.querySelector('.network-track');
  if (!track) return;

  if (window.innerWidth <= 767) {
    track.style.display = 'flex';
    track.style.overflowX = 'auto';
    track.style.scrollSnapType = 'x mandatory';
    track.style.gap = '20px';
    track.style.padding = '10px 15px';
    track.style.justifyContent = 'flex-start';
    track.style.webkitOverflowScrolling = 'touch';

    track.querySelectorAll('.network-slide').forEach(slide => {
      slide.style.flex = '0 0 auto';
      slide.style.scrollSnapAlign = 'center';
    });
  } else {
    // Reset styles for desktop
    track.removeAttribute('style');
    track.querySelectorAll('.network-slide').forEach(slide => {
      slide.removeAttribute('style');
    });
  }
}

document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.network-banner').forEach(banner => initLogoCarousel(banner));
  window.addEventListener('resize', () => {
    document.querySelectorAll('.network-banner').forEach(banner => initLogoCarousel(banner));
  });
});

document.addEventListener('shopify:section:load', e => {
  e.target.querySelectorAll('.network-banner').forEach(banner => initLogoCarousel(banner));
});
</script>
