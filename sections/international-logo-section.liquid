{{ 'international-logo-section.css' | asset_url | stylesheet_tag }}
{{ 'international-responsive.css' | asset_url | stylesheet_tag }}

<div class="international-network">
  <div class="page-width">
    <div class="network-inner">
      <div class="network-text">
        <p class="network-heading">{{ section.settings.heading | default: "VITAMART CAN BE FOUND ON THESE LARGEST NETWORKS" }}</p>
        <hr>
        <p>{{ section.settings.description | default: "Through sheer determination and constant hard work, Nutrifactor has been featured by some of the largest networks & business journals. Expanding its business to over 60 countries across the globe in 6 different continents, Vitamart is on its way to becoming a globally renowned brand." }}</p>
      </div>

      <div class="network-banner logos-per-{{ section.settings.logos_per_row }}">
        {% for block in section.blocks %}
          {% if block.type == 'logo' %}
            <img src="{{ block.settings.logo | image_url }}" alt="{{ block.settings.alt_text }}">
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Logo Section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "NUTRIFACTOR CAN BE FOUND ON THESE LARGEST NETWORKS"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Through sheer determination and constant hard work, Nutrifactor has been featured by some of the largest networks & business journals. Expanding its business to over 60 countries across the globe in 6 different continents, Nutrifactor is on its way to becoming a globally renowned brand."
    },
    {
      "type": "range",
      "id": "logos_per_row",
      "label": "Logos per row",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 5
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "limit": 5,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo image"
        },
        {
          "type": "text",
          "id": "alt_text",
          "label": "Alt text",
          "default": "Network logo"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Logo Section",
      "category": "International Section"
    }
  ]
}
{% endschema %}

<script>
document.addEventListener('DOMContentLoaded', function () {
  const banner = document.querySelector('.network-banner');
  if (!banner) return;

  if (window.innerWidth <= 767) {
    banner.style.display = 'flex';
    banner.style.overflow = 'hidden';
    banner.style.justifyContent = 'flex-start';
    banner.style.gap = '40px';

    // Wrap logos inside a track so only they move
    const track = document.createElement('div');
    track.style.display = 'flex';
    track.style.gap = '40px';
    track.style.willChange = 'transform';

    // Move all logos into track
    const logos = Array.from(banner.querySelectorAll('img'));
    logos.forEach(logo => track.appendChild(logo));

    // Clone logos to make loop seamless
    logos.forEach(logo => {
      const clone = logo.cloneNode(true);
      track.appendChild(clone);
    });

    banner.appendChild(track);

    let position = 0;
    let speed = 1; // px per frame

    function animate() {
      position -= speed;
      track.style.transform = `translateX(${position}px)`;

      const firstLogo = track.querySelector('img');
      const logoWidth = firstLogo.offsetWidth + 40; // width + gap

      if (Math.abs(position) >= logoWidth) {
        track.appendChild(firstLogo); // move first to the end
        position += logoWidth; // reset position to keep seamless loop
      }

      requestAnimationFrame(animate);
    }

    animate();
  }
});
</script>


